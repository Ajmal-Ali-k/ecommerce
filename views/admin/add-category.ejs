<!DOCTYPE html>
<html lang="en" dir="ltr">
  <%- include('./partials/Ahead.ejs') %>

  <body
    class="ec-header-fixed ec-sidebar-fixed ec-sidebar-light ec-header-light"
    id="body"
  >
    <!--  WRAPPER  -->
    <div class="wrapper">
      <!-- LEFT MAIN SIDEBAR -->
      <%- include('./partials/Aleftsidebar.ejs') %>

      <!--  PAGE WRAPPER -->
      <div class="ec-page-wrapper">
        <!-- Header -->
        <%- include('./partials/header.ejs') %>

        <!-- CONTENT WRAPPER -->
        <div class="ec-content-wrapper">
          <div class="content">
            <div
              class="breadcrumb-wrapper breadcrumb-wrapper-2 breadcrumb-contacts"
            >
              <h1>Main Category</h1>
              <p class="breadcrumbs">
                <span><a href="index.html">Home</a></span>
                <span><i class="mdi mdi-chevron-right"></i></span>Main Category
              </p>
            </div>
            <div class="row">
              <div class="col-xl-4 col-lg-12">
                <div class="ec-cat-list card card-default mb-24px">
                  <div class="card-body">
                    <div class="ec-cat-form">
                      <h4>Add New Category</h4>

                      <form action="/admin/catagory" method="post">
                        <div class="form-group row">
                          <label for="text" class="col-12 col-form-label"
                            >Name</label
                          >
                          <div class="col-12">
                            <input
                              id="text"
                              name="name"
                              class="form-control here slug-title"
                              type="text"
                            />
                          </div>
                        </div>

                        <!-- <div class="form-group row">
                              <label for="slug" class="col-12 col-form-label">Slug</label>
                              <div class="col-12">
                                <input id="slug" name="slug" class="form-control here set-slug" type="text" />
                                <small>The “slug” is the URL-friendly version of the
                                  name. It is usually all lowercase and contains
                                  only letters, numbers, and hyphens.</small>
                              </div>
                            </div> -->

                        <!-- <div class="form-group row">
                              <label class="col-12 col-form-label">Sort Description</label>
                              <div class="col-12">
                                <textarea id="sortdescription" name="sortdescription" cols="40" rows="2"
                                  class="form-control"></textarea>
                              </div>
                            </div> -->

                        <div class="form-group row">
                          <label class="col-12 col-form-label"
                            >Description</label
                          >
                          <div class="col-12">
                            <textarea
                              id="fulldescription"
                              name="description"
                              cols="40"
                              rows="4"
                              class="form-control"
                            ></textarea>
                          </div>
                        </div>

                        <!-- <div class="form-group row">
                              <label class="col-12 col-form-label">Product Tags
                                <span>( Type and make comma to separate tags )</span></label>
                              <div class="col-12">
                                <input type="text" class="form-control" id="group_tag" name="group_tag" value=""
                                  placeholder="" data-role="tagsinput" />
                              </div>
                            </div> -->

                        <div class="row">
                          <div class="col-12">
                            <button
                              name="submit"
                              type="submit"
                              class="btn btn-primary"
                            >
                              Submit
                            </button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xl-8 col-lg-12">
                <div class="ec-cat-list card card-default">
                  <div class="card-body">
                    <div class="table-responsive">
                      <table id="responsive-data-table" class="table">
                        <thead>
                          <tr>
                            <!-- <th>Thumb</th> -->
                            <th>Catagory name</th>
                            <!-- <th>Categories</th> -->
                            <!-- <th>Product</th> -->
                            <!-- <th>Total Sell</th> -->
                            <th>Status</th>
                            <!-- <th>Trending</th> -->
                            <th>Action</th>
                          </tr>
                        </thead>

                        <tbody>
                          <% for(let i=0 ;i< cat.length;i++) { %>
                          <tr id="row<%=cat[i].id%>">
                            <!-- <td>
                                  <img class="cat-thumb" src="/admin/img/category/clothes.png" alt="Product Image" />
                                </td> -->
                           
                            <td><%- cat[i].name %></td>
                            <!-- <td>
                                  <span class="ec-sub-cat-list">
                                    <span class="ec-sub-cat-count" title="Total Sub Categories">5</span>
                                    <span class="ec-sub-cat-tag">T-shirt</span>
                                    <span class="ec-sub-cat-tag">Shirt</span>
                                    <span class="ec-sub-cat-tag">Dress</span>
                                    <span class="ec-sub-cat-tag">Jeans</span>
                                    <span class="ec-sub-cat-tag">Top</span>
                                  </span>
                                </td> -->
                            <!-- <td>28</td>
                                <td>2161</td> -->
                            <td>ACTIVE</td>
                            <!-- <td>
                                  <span class="badge badge-success">Top</span>
                                </td> -->
                            <td>
                              <!-- <div class="btn-group">
                                    <button type="button" class="btn btn-outline-success">
                                      Info
                                    </button>
                                    <button type="button"
                                      class="btn btn-outline-success dropdown-toggle dropdown-toggle-split"
                                      data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                      data-display="static">
                                      <span class="sr-only">Info</span>
                                    </button>

                                    <div class="dropdown-menu">
                                      <a class="dropdown-item" href="#">Edit</a>
                                      <a class="dropdown-item" href="#">Delete</a>
                                    </div>
                                  </div> -->
                              <!-- <a href="/admin/deleteCategory/<%= cat[i].id %>"> <button type="button" class="btn btn-danger btn-sm btn-outline-primary ">Delete</button></a> -->
                              <button
                                type="button"
                                onclick="deletecat('<%=cat[i].id%>')"
                                class="btn btn-danger btn-sm btn-outline-primary"
                              >
                                Delete
                              </button>
                            </td>
                          </tr>

                          <% } %>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- End Content Wrapper -->
        <!-- Footer -->
        <%- include('./partials/Afooter.ejs') %>
      </div>
      <!-- End Page Wrapper -->
    </div>
    <!-- End Wrapper -->

    <!-- Common Javascript -->

    <script>
      function deletecat(Id) {
        Swal.fire({
          title: "Are you sure?",
          text: "You won't be able to revert this!",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#d33",
          confirmButtonText: "Yes, delete it!",
        })
          .then((result) => {
            if (result.isConfirmed) {
              Swal.fire("Deleted!", "Your file has been deleted.", "success");
            }
          })
          .then(() => {
            $.ajax({
              url: `/admin/deleteCategory?catID=${Id}`,
              method: "delete",
              success: (res) => {
                console.log(res);
                document.getElementById('row'+Id).remove()
              },
            });
          });
      }
    </script>

    <%- include('./partials/commonscript.ejs') %>
  </body>
</html>
